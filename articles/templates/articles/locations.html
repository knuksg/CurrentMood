{% extends 'main/base.html' %}
{% block body %}

<form id="locationForm"action="" method="POST">
  {% csrf_token %}
  <input id="locationInput" type="hidden" name="userLocation" value="">
  <button id="locationButton" type="submit" style="padding: 5px 10px 5px 10px;">⌖</button>
</form>

<p id="result"></p>
<p>{{user_position}} 인근</p>

<script>
function locationGet(){
  var options = {
    enableHighAccuracy: false,
    timeout: 10000,
    maximumAge: 0
  };

  function success(pos) {
    var crd = pos.coords;
    const result = document.querySelector('#result')
    const usrCrd = [47.23434,142.34232] // 임시위치
    result.innerHTML = [usrCrd[0],usrCrd[1]] // 화면에 위치 표시
    // const usrCrd = [crd.latitude,crd.longitude]
    // result.innerHTML= [crd.latitude,crd.longitude]

    const reqForm = document.querySelector("#locationForm")
    reqForm.userLocation.value = usrCrd
  }

  function error(err) {
    console.warn(`ERROR(${err.code}): ${err.message}`);
  }

  navigator.geolocation.getCurrentPosition(success,error,options)

  reqForm.submit()
}
locationGet()
</script>
{% endblock body %}
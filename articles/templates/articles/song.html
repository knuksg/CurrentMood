{% extends 'main/base.html' %}
{% block body %}
<div id="song">
  <div class="d-flex flex-column justify-content-center align-items-center">
    <img src="" alt="">
    <div class="my-3" style="width: 450px;">
      <p id="now-playing-title" class="m-0">재생 중인 곡이 없습니다</p>
      <p id="now-playing-channel" class="m-0 opacity-75"></p>
    </div>
    <div class="d-flex gap-3">
      <div id="current-time">0:00</div>
      <input id="progress-bar" type="range" value="0">
      <div id="duration">0:00</div>
    </div>
    <div class="d-flex gap-5">
      <i id="previous" class="bi bi-skip-start-fill fs-1"></i>
      <i id="video-button" class="bi bi-play-fill fs-1"></i>
      <i id="next" class="bi bi-skip-end-fill fs-1"></i>
    </div>
  </div>
</div>
<div class="fixed-bottom bg-black">
  <div class="d-flex flex-column justify-content-center align-items-center">
    <div style="width: 450px;">
      <h1 id="playlist-btn" class="pt-3">플레이리스트</h1>
      <div id="playlist">
      </div>
    </div>
  </div>
</div>

<style>
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none;
    cursor: pointer;
    width: 12px;
    height: 12px;
    background: white;
    border-radius: 50%;
  }

   #progress-bar {
    background: linear-gradient(to right, #fff 0%, #fff 50%, #6c757d 50%, #6c757d 100%);
    border-radius: 8px;
    height: 4px;
    width: 350px;
    margin: auto;
    outline: none;
    -webkit-appearance: none;
  }
</style>
<script>
  document.querySelector('#progress-bar').oninput = function() {
    this.style.background = 'linear-gradient(to right, #fff 0%, #fff '+this.value +'%, #6c757d ' + this.value + '%, #6c757d 100%)'
  }
  const playlist = document.querySelector('#playlist')
  var videoIDs = JSON.parse(window.sessionStorage.getItem('videoIDs'))
  var videoTitles = JSON.parse(window.sessionStorage.getItem('videoTitles'))
  var videoChannels = JSON.parse(window.sessionStorage.getItem('videoChannels'))

  const index = window.sessionStorage.index
  const playlistBtn = document.querySelector('#playlist-btn')
  var playlistFull = false
  playlistBtn.addEventListener('click', function(e) {
    if (playlistFull == false) {
      for (idx in videoIDs){
        playlist.innerHTML += `
        <div id="playlist-item" class="playlist-item">
          <div id="${videoIDs[idx]}" class="playlist-vidid"></div>
          <hr class="my-0">
          <div class="d-flex justify-content-center align-items-center">
            <img id="playlist-sm" class="col-2" src="https://i.ytimg.com/vi/${videoIDs[idx]}/default.jpg" alt="">
            <div class="col-9 ms-3">
              <p id="playlist-title" class="playlist-title m-0">${videoTitles[idx]}</p>
              <p id="playlist-channel" class="playlist-channel m-0 opacity-75">${videoChannels[idx]}</p>
            </div>
          </div>
        </div>
        `
      } 
      playlistFull = true
    } else {
      playlist.innerHTML = ''
      playlistFull = false
    }
  }) 



  
</script>
{% endblock body %}